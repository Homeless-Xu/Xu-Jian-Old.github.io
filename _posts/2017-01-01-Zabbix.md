---
layout: post
title: Zabbix
tags: 
categories: ğŸ› 
---

## Zabbix 
  
- [å®˜ç½‘][1]:
- ä¼ä¸šçº§çš„ CPUã€å†…å­˜ã€ç¡¬ç›˜ã€ç½‘ç»œã€ç«¯å£ã€æ—¥å¿—çš„ ç›‘è§†è½¯ä»¶.

- æ”¯æŒä¸»æµ Linuxã€Mac OS . ä½†æ˜¯ Windows åªèƒ½è·‘å®¢æˆ·ç«¯!!!!!

- è½¯ä»¶ç‰ˆæœ¬: 
	- LTS: Long Time Support é•¿æœŸæ”¯æŒ.
	- Zabbix 3.0 LTS  2016 2.16 å‘è¡Œ.

- ç”¨ç½‘é¡µæ¥æ˜¾ç¤ºç³»ç»ŸçŠ¶æ€.

- è§¦å‘å™¨(trigger):  CPU è¾¾åˆ° 90% è‡ªåŠ¨å‘é‚®ä»¶ç»™ä½ è­¦å‘Š

- å®æ—¶ç»˜å›¾: æ›´ç›´è§‚æ˜¾ç¤ºæœåŠ¡å™¨çŠ¶æ€.


æºç ç¼–è¯‘:
[æºç å‹ç¼©åŒ…å®˜ç½‘é“¾æ¥][2]  (wget è¦ç”¨åˆ°) .

æºä»£ç å‹ç¼©åŒ…åªæœ‰ä¸€ä¸ª: åŒ…å«äº† Server + Agent.  æŒ‰éœ€æ±‚é€‰æ‹©å®‰è£…å°±å¥½äº†.
 
	wget [http://jaist.dl.sourceforge.net/project/zabbix/ZABBIX%20Latest%20Stable/3.0.1/zabbix-3.0.1.tar.gz]

- Zabbix ç»„æˆ: Server ç›‘æ§ç«¯ + Agent (è¢«ç›‘æ§ç«¯);


###### zabbix è¿›ç¨‹ç»“æ„:

	zabbix\_agentd
	zabbix\_get
	zabbix\_proxy
	zabbix\_sender
	zabbix\_server
	zabbix\_java\_gateway (å¯é€‰)

-  è¿›ç¨‹ä»‹ç»:

	zabbix\_agentd

å®¢æˆ·ç«¯å®ˆæŠ¤è¿›ç¨‹ï¼Œæ”¶é›†å®¢æˆ·ç«¯æ•°æ®ï¼Œå¦‚cpuã€å†…å­˜ã€ç¡¬ç›˜ä½¿ç”¨ä½¿ç”¨æƒ…å†µ.

	zabbix_get
è·å–è¢«ç›‘æ§å®¢æˆ·ç«¯ä¿¡æ¯çš„å‘½ä»¤,å¸¸ç”¨äºæ’é”™ã€‚

	zabbix_sender
å‘é€æ•°æ®ç»™serveræˆ–è€…proxyï¼Œé€šå¸¸ç”¨äºè€—æ—¶æ¯”è¾ƒé•¿çš„æ£€æŸ¥ã€‚
è„šæœ¬æ‰§è¡Œå®Œæ¯•ä¹‹åï¼Œä½¿ç”¨senderä¸»åŠ¨æäº¤æ•°æ®ã€‚

	zabbix_server
æœåŠ¡ç«¯å®ˆæŠ¤è¿›ç¨‹ã€‚æ‰€æœ‰æ•°æ®æœ€ç»ˆéƒ½æ˜¯æäº¤åˆ°server
å¤‡æ³¨ï¼šæœ‰äº›æ•°æ®ä¸»åŠ¨äº¤ç»™server,ä¹Ÿæœ‰çš„æ˜¯serverä¸»åŠ¨å»è·å–æ•°æ®ã€‚

	zabbix_proxy
ä»£ç†å®ˆæŠ¤è¿›ç¨‹ã€‚åŠŸèƒ½ç±»ä¼¼serverï¼Œå”¯ä¸€ä¸åŒçš„æ˜¯å®ƒåªæ˜¯ä¸€ä¸ªä¸­è½¬ç«™.
å®ƒéœ€è¦æŠŠæ”¶é›†åˆ°çš„æ•°æ®æäº¤/è¢«æäº¤åˆ°serveré‡Œã€‚
ä¸ºä»€ä¹ˆè¦ç”¨ä»£ç†:ä»£ç†æ˜¯åšä»€ä¹ˆçš„ï¼Ÿ


## Zabbix server :
> ä¸€å®šè¦å…ˆå®‰è£…ä¾èµ–ç»„ä»¶,ä¸ç„¶æŠ¥é”™
> 
	yum install net-snmp-devel libxml2-devel libcurl-devel 
	
	cd /usr/local/src
	
	wget "http://downloads.sourceforge.net/project/zabbix/ZABBIX%20Latest%20Stable/2.2.2/zabbix-2.2.2.tar.gz?r=http%3A%2F%2Fwww.zabbix.com%2Fdownload.php&ts=1395066528&use_mirror=jaist"
	
	tar -xzvf zabbix-2.2.2.tar.gz
	
	cd zabbix-2.2.2
	
	./configure --prefix=/usr/local/zabbix-2.2.2/ --enable-server â€”enable-agent --with-mysql --with-net-snmp --with-libcurl --with-libxml2
	
	make
	make install

- Zabbix serverä¸€èˆ¬å……å½“ä¸¤ä¸ªè§’è‰²ï¼šserverã€angentï¼Œ 
	æ‰€ä»¥ä¸Šé¢çš„é…ç½®å‚æ•°ä¹ŸåŒæ—¶åŠ ä¸Šäº†--enable-agentã€‚


 å¤‡æ³¨ï¼šè¯·å…ˆå®‰è£…å¥½MySQLï¼Œsnmpï¼Œcurlå¼€å‘åº“ã€‚

å®‰è£… SNMP:  

	brew install net-snmp

æˆ–è€…
	    wget http://ftp.ntua.gr/mirror/net-snmp/ucd-snmp/4.2.3/ucd-snmp-4.2.3.tar.gz
	    tar -zxvf ucd-snmp-4.2.3.tar.gz
	    cd ucd-snmp-4.2.3
	    ./configure
	    make
	    make install


##### curl


cURLæ˜¯ä¸€ä¸ªåˆ©ç”¨URLè¯­æ³•åœ¨å‘½ä»¤è¡Œä¸‹å·¥ä½œçš„æ–‡ä»¶ä¼ è¾“å·¥å…·ï¼Œ
å®ƒæ”¯æŒæ–‡ä»¶ä¸Šä¼ å’Œä¸‹è½½ï¼Œæ‰€ä»¥æ˜¯ç»¼åˆä¼ è¾“å·¥å…·ã€‚
cURLè¿˜åŒ…å«äº†ç”¨äºç¨‹åºå¼€å‘çš„libcurlã€‚

æŸ¥çœ‹æ˜¯å¦å®‰è£… /usr/local ä¸‹é¢ æœ‰æ²¡æœ‰ curl æ–‡ä»¶å¤¹.
å®˜ç½‘
[https://curl.haxx.se/][3]




###### Server å®‰è£…å¸¸è§é”™è¯¯:

configure: error: MySQL library not found




### åˆ›å»ºç”¨æˆ·
ä¸ºäº†å®‰å…¨è€ƒè™‘zabbixåªä½¿ç”¨æ™®é€šç”¨æˆ·è¿è¡Œï¼Œ
å‡å¦‚ä½ å½“å‰ç”¨æˆ·æ˜¯ttlsaï¼Œé‚£ä¹ˆä½ è¿è¡Œä»–ï¼Œä»–ä¾¿ä½¿ç”¨ttlsaèº«ä»½è¿è¡Œã€‚
å‡å¦‚ä½ å½“å‰ç”¨æˆ·æ˜¯root  é‚£ä¹ˆzabbixå°†ä¼šä¸»åŠ¨ä½¿ç”¨zabbixç”¨æˆ·æ¥è¿è¡Œã€‚
ä½†æ˜¯å¦‚æœä½ çš„ç³»ç»Ÿæ²¡æœ‰åå«zabbixçš„ç”¨æˆ·ï¼Œä½ éœ€è¦åˆ›å»ºä¸€ä¸ªç”¨æˆ·ï¼Œå¦‚ä¸‹ï¼š

groupadd zabbix
useradd -g zabbix zabbix


### åˆå§‹åŒ–æ•°æ®åº“
zabbix serverä¸proxyéœ€è¦æ•°æ®åº“ï¼Œangentä¸éœ€è¦ã€‚

å°¤å…¶è¦æ³¨æ„çš„æ˜¯proxyåªéœ€è¦å¯¼å…¥ä¸€ä¸ªsqlæ–‡ä»¶(å¤šå¯¼å…¥ä¼šæŠ¥é”™!)ï¼Œè€Œserverä¸€å…±è¦å¯¼å…¥3ä¸ªsqlæ–‡ä»¶ã€‚

å‡è®¾:ä½ å®‰è£…å¥½äº†MySQLï¼Œç”¨æˆ·åä¸ºrootï¼Œå¯†ç ä¸ºttlsapwd

mysql -uroot -pttlsapwd
mysql\> create database zabbix default charset utf8;
mysql\> quit;
mysql -uroot -pttlsapwd zabbix \< database/mysql/schema.sql

å¤‡æ³¨ï¼šåˆ›å»ºæ•°æ®åº“è¯·åˆ«å¿˜è®°åŠ default charset utf8ï¼Œæœ‰å¯èƒ½ä¼šå¯¼è‡´ä½ å‡ºç°ä¸­æ–‡ä¹±ç é—®é¢˜ï¼Œ

#### å¦‚æœä½ ä»…ä»…æ˜¯åˆå§‹åŒ–proxyçš„æ•°æ®åº“ï¼Œé‚£ä¹ˆå¤Ÿäº†ã€‚
å¦‚æœåˆå§‹åŒ–serverï¼Œé‚£ä¹ˆæ¥ç€å¯¼å…¥ä¸‹é¢ä¸¤ä¸ªsql

mysql -uroot -pttlsapwd zabbix \< database/mysql/images.sql
mysql -uroot -ppttlsapwd zabbix \< database/mysql/data.sql


###### é…ç½® Zabbix

é…ç½®zabbix\_serveré…ç½®æ–‡ä»¶,zabbixæºç ç›®å½•ä¸‹

mkdir /etc/zabbix
cp config/zabbix\_server.conf /etc/zabbix/
vim /etc/zabbix/zabbix\_server.conf
DBName=zabbix
DBUser=root
DBPassword=ttlsapwd
DBPort=3306 â€œâ€

###### å¯åŠ¨ Zabbix server  é»˜è®¤ç«¯å£10051

/usr/local/zabbix-2.2.2/sbin/zabbix\_server




## Zabbix agent :
å¯ä¸‹è½½æºä»£ç  æˆ–è€… æœ‰ç°æˆçš„è½¯ä»¶?
è¿™ä¸ªå¯ä»¥è¿è¡Œåœ¨ winserver ä¸Š!

cd /usr/local/src
wget "http://downloads.sourceforge.net/project/zabbix/ZABBIX%20Latest%20Stable/2.2.2/zabbix-2.2.2.tar.gz?r=http%3A%2F%2Fwww.zabbix.com%2Fdownload.php&ts=1395066528&use\_mirror=jaist"
tar -xzvf zabbix-2.2.2.tar.gz
cd zabbix-2.2.2
./configure --prefix=/usr/local/zabbix-2.2.2/ --enable-agent
make
make install


### å®¢æˆ·ç«¯é…ç½®

é…ç½®zabbix\_serveré…ç½®æ–‡ä»¶,zabbixæºç ç›®å½•ä¸‹

vim /usr/local/zabbix-2.2.2/etc/zabbix\_agentd.conf
Server=127.0.0.1
ServerActive=127.0.0.1
Hostname=Zabbix server


Serverå’ŒServerActiveéƒ½æŒ‡å®šzabbixserverçš„IPåœ°å€ï¼Œ

ä¸åŒçš„æ˜¯ï¼Œå‰è€…æ˜¯è¢«åŠ¨åè€…æ˜¯ä¸»åŠ¨ã€‚

Serverè¿™ä¸ªé…ç½®æ˜¯ç”¨æ¥å…è®¸127.0.0.1è¿™ä¸ªipæ¥æˆ‘è¿™å–æ•°æ®ã€‚
serverActiveçš„127.0.0.1çš„æ„æ€æ˜¯ï¼Œå®¢æˆ·ç«¯ä¸»åŠ¨æäº¤æ•°æ®ç»™ä»–ã€‚æ˜ç™½äº†å—ï¼Ÿ
ä¸ºä»€ä¹ˆè¦åˆ†ä¸»åŠ¨å’Œè¢«åŠ¨ï¼Ÿåç»­å†æ¥è®¨è®ºè¿™ä¸ªé—®é¢˜ï¼

å…¶ä»–ä¸»æœºå®‰è£…å®¢æˆ·ç«¯è®°å¾—æ·»åŠ zabbixç”¨æˆ·ã€‚


#### zabbixå®¢æˆ·ç«¯å¯åŠ¨    é»˜è®¤ç«¯å£10050

/usr/local/zabbix-2.2.2/sbin/zabbix\_agentd





## zabbixç®¡ç†ç½‘ç«™é…ç½®

æ‹·è´å‰ç«¯æ–‡ä»¶

mkdir /data/logs/nginx
mkdir /data/site/monitor.ttlsa.com/zabbix
cp -rp frontends/php/\*Â /data/site/monitor.ttlsa.com/zabbix



é…ç½®è™šæ‹Ÿä¸»æœº
è¯·ç›¸åº”ä¿®æ”¹ä½ çš„é…ç½®æ–‡ä»¶è·¯å¾„


vim /usr/local/nginx-1.5.8/conf/vhost/monitor.ttlsa.com.conf
server {
listen       80;
server\_name monitor.ttlsa.com;
access\_log  /data/logs/nginx/monitor.ttlsa.com.access.log  main;
 
index index.html index.php index.html;
root /data/site/monitor.ttlsa.com;
 
location /
{
try\_files $uri $uri/ /index.php?$args;
}
 
location  ^(.+.php)(.)$ {
fastcgi\_split\_path\_info ^(.+.php)(.\*)$;
include fastcgi.conf;
fastcgi\_pass  127.0.0.1:9000;
fastcgi\_index index.php;
fastcgi\_param  PATH\_INFO          $fastcgi\_path\_info;
}
}


åœ¨çº¿é…ç½®zabbix
æµè§ˆå™¨æ‰“å¼€http://monitor.ttlsa.com/zabbixã€‚
å¦‚ä¸‹æ˜¯zabbix 2.2çš„å®‰è£…ç•Œé¢ï¼ŒåŒ…æ‹¬æ¬¢è¿ç•Œé¢ä¸€å…±6æ­¥.

4.3.1 æ¬¢è¿ç•Œé¢
4.3.2 phpéœ€æ±‚æ£€æŸ¥   éœ€è¦å…¨éƒ¨ OK
4.3.3 MySQLé…ç½®
4.3.4 zabbixæœåŠ¡ç«¯è¯¦ç»†ä¿¡æ¯
4.3.5 zabbixå®‰è£…å‰ä¿¡æ¯åˆ—è¡¨
4.3.6 å®‰è£…å®Œæˆ
å¦‚æœå¤±è´¥äº†ï¼Œä¸€èˆ¬æƒ…å†µæ˜¯phpå¯¹zabbixæ²¡æœ‰å†™æƒé™

ç™»é™†zabbixï¼Œé»˜è®¤ç”¨æˆ·åï¼šAdminï¼Œå¯†ç ï¼šzabbix






---- 


## Zabbix - Debian8

\*\*[æ•™ç¨‹é“¾æ¥ (è‹±æ–‡)][4] Debian-8 + CentOS-7

##### ä¸€: æ›´æ–°ç³»ç»Ÿ
	sudo apt-get update

##### äºŒ: å®‰è£…æºä»£ç ç¼–è¯‘çš„ä¾èµ–ç¯å¢ƒ

	sudo apt-get install build-essential gcc curl wget libsnmp-dev libcurl4-gnutls-dev libxml2-dev

##### ä¸‰: å®‰è£… MariaDB æ•°æ®åº“

	sudo apt-get install mariadb-server mariadb-client libmysqld-dev
> ä¼šè¦ä½ è¾“å…¥æ•°æ®åº“é»˜è®¤ Root çš„å¯†ç   æœ¬æ–‡è¾“å…¥ xujian 

##### å››: ä¿è¯æ•°æ®åº“å®‰å…¨:
> å¦‚: ä¸è®¸åŒ¿åç™»å½• / Root è¿œç¨‹ç™»å½• / ç§»é™¤æµ‹è¯•æ•°æ®åº“.

	mysql_secure_installation   
> æŒ‰ç…§å±å¹•æç¤º ç¬¬ä¸€ä¸ªé€‰ N å…¶ä»–é€‰ Y .

1. Change the root password? [Y/n]() n
2. Remove anonymous users? [Y/n]() y
3. Disallow root login remotely? [Y/n]() y
4. Remove test database and access to it? [Y/n]() y
5. Reload privilege tables now? [Y/n]() y


##### äº”: å®‰è£… Apache + PHP
> Apache å¾ˆå¤šåŠŸèƒ½éƒ½æ˜¯æ ¹æ® PHP è¯­è¨€å†™çš„. ä¸å¾—ä¸è£… PHP.
> Zabbix å¯¹ PHP è¿˜æœ‰ç‰¹åˆ«çš„è¦æ±‚. æ‰€ä»¥è¿˜è¦å®‰è£…ä¸€äº› PHP çš„é¢å¤–ç»„ä»¶.
> å®‰è£…è¿‡ç¨‹ è¾“å…¥ Y  .

	sudo apt-get install apache2 php5 php5-mysql php5-gd php5-cli php5-xmlrpc

##### å…­: ä¿®æ”¹ PHP é…ç½®æ–‡ä»¶
> Zabbix å¯¹PHP æœ‰ç‰¹æ®Šè¦æ±‚.
> ä¸‹é¢çš„ äºŒé€‰ä¸€ ç¼–è¾‘å™¨ä¸åŒè€Œå·².  ä¸ªäººä¹ æƒ¯ç”¨ VI.
	sudo nano /etc/php5/apache2/php.ini
	sudo vi /etc/php5/apache2/php.ini

æŸ¥æ‰¾ä¸‹åˆ—å†…å®¹ å¹¶ ä¿®æ”¹æˆå¦‚ä¸‹å€¼
	post_max_size = 16M
	max_execution_time = 300
	max_input_time = 300
	date.timezone = Asia/Shanghai  
	always_populate_raw_post_data = -1

æ³¨æ„: æ—¶åŒºé€‰æ‹©[http://php.net/manual/en/timezones.php][10]
ç›‘æ§å’Œå¤‡ä»¶æ¬¾çš„ä¸¤å°ç”µè„‘ æ—¶åŒºä¸€å®šè¦ä¸€è‡´! ä¸ç„¶è¿› Zabbix ç•Œé¢ä¼šé”™è¯¯çº¢è‰²æç¤º.
å¤§é™†/åŸå¸‚   è¿™é‡Œé€‰æ‹© Asia/Shanghai . 

ä¿®æ”¹å é‡å¯ Apache æœåŠ¡æ¥ç”Ÿæ•ˆ
	sudo systemctl restart apache2.service


##### ä¸ƒ: ç¼–è¯‘ Zabbix-Server

- ä¸‹è½½:
	wget http://jaist.dl.sourceforge.net/project/zabbix/ZABBIX%20Latest%20Stable/3.0.1/zabbix-3.0.1.tar.gz

- è§£å‹:
	tar -xf zabbix-3.0.1.tar.gz
	cd zabbix-3.0.1.tar.gz
	ls

- ç¼–è¯‘! éœ€è¦å¼€å¯ä¸€äº›åŠŸèƒ½  ä¸èƒ½ç›´æ¥ ./configure ?
	./configure --enable-server --enable-agent --with-mysql --enable-ipv6 --with-net-snmp --with-libcurl --with-libxml2 
	make
	make install



##### å…«: ç»™ Zabbix åˆ›å»ºç”¨æˆ·ç»„ (å®‰å…¨èµ·è§ä¸å…è®¸ç”¨ rootæ¥ç›‘æ§?)


	groupadd zabbix
	//åˆ›å»º ç”¨æˆ·ç»„
	
	useradd -g zabbix -d /usr/local/share/zabbix -s /bin/false zabbix
	//-g ( GROUP )     æŒ‡å®šæ–°ç”¨æˆ·  æ‰€å±ç»„.
	//-d ( HOME_DIR )  æŒ‡å®šæ–°ç”¨æˆ·  ç™»å½•ç›®å½•.
	//-s ( SHELL )     æŒ‡å®šæ–°ç”¨æˆ·  Shell.  é»˜è®¤ä½¿ç”¨ bash




##### ä¹: ç»™ Zabbix é…ç½®æ•°æ®åº“.

	mysql -u root -p 
	//ç™»å½• MySQL, è¾“å…¥ä½  ç¬¬ä¸‰æ­¥ è®¾ç½®çš„å¯†ç  è¿™é‡Œæ˜¯ xujian.
	MariaDB> create database zabbix;
	//åˆ›å»ºæ•°æ®åº“
	MariaDB> grant all privileges on zabbix.* to 'zabbix'@'localhost' identified by 'xujian';
	//ç»™ zabbix ç”¨æˆ·æƒé™. xujian æ”¹æˆä½ è‡ªå·±çš„å¯†ç 
	MariaDB> flush privileges;
	//æ›´æ–°æƒé™
	MariaDB> exit
	//é€€å‡º MySQL.

> æ•°æ®åº“ ä¸ä¸€å®š è£…åœ¨ Zabbix-Server æœåŠ¡å™¨ä¸Šçš„.
> å¦‚æœä½ çš„æ•°æ®åº“æ˜¯è£…åœ¨ åˆ«çš„ç”µè„‘ä¸Šçš„è¯:
> ä¸‹é¢çš„ % æ”¹æˆä½ çš„ ip , å¯†ç  æ”¹æˆä½ æ•°æ®åº“çš„å¯†ç .
	MariaDB> grant all privileges on zabbix.* to 'zabbix'@'%' identified by 'your_password';


- å¯¼å…¥æ•°æ®åº“è¡¨ç»“æ„:

	cd zabbix-2.4.5/
	//è¿›å…¥ è§£å‹å‡ºæ¥çš„ æºä»£ç æ–‡ä»¶å¤¹.
	# ls database/mysql/
	// ä½ ä¼šå‘ç°æ–‡ä»¶å¤¹ä¸‹é¢æœ‰ä¸‰ä¸ªæ–‡ä»¶. æŠŠè¿™ ä¸‰ä¸ªè¡¨ å¯¼å…¥åˆ°æ•°æ®åº“ä¸­å°±å¥½äº†.
	# mysql -u zabbix -p zabbix \< database/mysql/schema.sql
	# mysql -u zabbix -p zabbix \< database/mysql/images.sql
	# mysql -u zabbix -p zabbix \< database/mysql/data.sql



##### å: é…ç½® Apache Web

	rm /var/www/html/index.html15.
	//å…ˆæŠŠ åŸç† Apache é»˜è®¤çš„ç½‘é¡µåˆ æ‰
	cp -rf frontends/php/* /var/www/html/
	//æ›¿æ¢æˆ Zabbix 3 æºä»£ç é‡Œ frontends/php/ é¢çš„æ–‡ä»¶.
	
	
	
	usermod -aG www-data zabbix 
	// -aG æŠŠç”¨æˆ·åŠ åˆ°é¢å¤–çš„ç»„(ä¸€äººèƒ½æœ‰å¥½å‡ ä¸ªç»„çš„)
	a2enmod ssl
	//a2enmod  å±äºapache2.2-commonåŒ…ä¸‹çš„ä¸€ä¸ªå·¥å…· å…è®¸ä½ é…ç½®apacheçš„ä¸€ä¸ªæ¨¡å—ï¼Œå¯ç”¨æˆ–è€…ç¦ç”¨ã€‚
	//è¿™é‡Œ æ˜¯å¯ç”¨ ssl (ä¸€ç§å®‰å…¨åè®® äº’è”ç½‘é€šä¿¡ç”¨çš„ å·²è¿‡æ—¶.)
	a2ensite default-ssl
	systemctl restart apache2.servic
	//é‡å¯ Apache æœåŠ¡.


##### åä¸€: é…ç½® Zabbix-Server

ç¼–è¾‘ æœåŠ¡ç«¯çš„é…ç½®æ–‡ä»¶: 
	vi /usr/local/etc/zabbix_server.conf
æ”¹æˆå¦‚ä¸‹å€¼.
	ListenPort=10051
	LogFile=/var/log/zabbix_server.log
	DBHost=localhost      ## å¦‚æœæ•°æ®åº“ä¸åœ¨æœ¬æœº: localhost æ¢æˆæ•°æ®åº“æœåŠ¡å™¨çš„ IP.
	DBName=zabbix         ## æ•°æ®åº“åç§°
	DBUser =zabbix        ## æ•°æ®åº“ç”¨æˆ·å
	DBPassword=password   ## ç¬¬äºŒæ­¥çš„æ•°æ®åº“å¯†ç 
	DBSocket=/var/run/mysqld/mysqld.sock
	DBPort=3306


- åˆ›å»ºæ•°æ®åº“æ—¥å¿—æ–‡ä»¶ å¹¶ ç»™ä¸æƒé™.
	touch /var/log/zabbix\_server.log
	chmod 775 /var/log/zabbix\_server.log
	chgrp zabbix /var/log/zabbix\_server.log
	//æ”¹å˜æ–‡ä»¶çš„ ç¾¤ç»„å±æ€§.



å¯åŠ¨æœåŠ¡!

	/usr/local/sbin/zabbix_server
	/usr/local/sbin/zabbix_agentd
	/usr/local/sbin/zabbix_agent
ç”¨ä¸‹é¢å‘½ä»¤ æŸ¥çœ‹ æœåŠ¡æ˜¯å¦å¯åŠ¨æˆåŠŸ.
	netstat -tulpn



##### åäºŒ: å®‰è£… Web å‰ç«¯é¡µé¢æ¥å£
ä»»æ„ç”µè„‘ æ‰“å¼€æµè§ˆå™¨ è¾“å…¥ Zabbix-Server çš„ IP
	http://æœåŠ¡å™¨ IP åœ°å€/setup.php  /æˆ–è€…/  https://æœåŠ¡å™¨ IP åœ°å€/setup.php
æœ¬æ–‡: 0219.oicp.net/setup.php

ç„¶åå°±èƒ½çœ‹çš„ Zabbix çš„ ç½‘é¡µé…ç½®ç•Œé¢äº† ! æ¿€åŠ¨ å…´å¥‹ å•Š....

æ€»æœ‰6æ­¥:
- ç¬¬äºŒæ­¥: æœ€å¥½å…¨éƒ¨ æ˜¯ OK.
- ç¬¬ä¸‰æ­¥: æ•°æ®åº“è®¾ç½®
	é€‰æ‹©æ•°æ®åº“ç±»å‹ è¿™é‡Œé€‰ MySQL
	æ•°æ®åº“ IP // é€‰é»˜è®¤ Localhost æˆ–è€… æ•°æ®åº“åœ¨åˆ«çš„æœåŠ¡å™¨. å°±å¡«IP
	æ•°æ®åº“ åç§°   zabbix
	æ•°æ®åº“ ç”¨æˆ·å zabbix
	æ•°æ®åº“ å¯†ç    xujian
- ç¬¬å››æ­¥: Zabbix Server é…ç½®
	Host:Localhost
	Port:10051
	Name:zabbix


	chown -R www-data /var/www/html/conf/   
	//ç¬¬äº”æ­¥ä¹‹å‰ è¦ å…è®¸ Apache æœ‰å†™å…¥é…ç½®çš„æƒé™.

- ç„¶å ä¸‹ä¸€æ­¥ ä¸‹ä¸€æ­¥  ç›´åˆ° Finish

Finsh å®Œæˆä¹‹å  è¿˜è¦ ç»™ root æŸäº›æƒé™.
	chown -R root /var/www/html/conf/

ä¹‹åå°±èƒ½ç”¨ä¸‹é¢çš„ è´¦å·å¯†ç  ç™»å½•äº†
	0214.help/index.php
	Username: admin
	Password: zabbix

è¿™ä¸‹ å°±èƒ½è¿› Web ç•Œé¢äº†.

##### åä¸‰: å¼€æœºå¯åŠ¨
ç¼–è¾‘è¿™ä¸ªæ–‡ä»¶
	vi /etc/rc.local
æŠŠä¸‹é¢ä¸‰è¡Œ åŠ åˆ° exit 0 (å°¾è¡Œ)   ä¸Šé¢å°±è¡Œ.
	/usr/local/sbin/zabbix_agentd
	/usr/local/sbin/zabbix_agent
	/usr/local/sbin/zabbix_server

æ¥ä¸‹å»å°±æ˜¯ å»è¢«ç›‘æ§çš„ç”µè„‘ å®‰è£…å®¢æˆ·ç«¯äº†. å®‰è£…å¥½å®¢æˆ·ç«¯å†å›æ¥é…ç½®ä¸‹ Web ç•Œé¢å°±å¥½äº†



##### åå›› : å®¢æˆ·ç«¯é…ç½® Debian8 (è¢«ç›‘æ§çš„ç”µè„‘ä¸Šå®‰è£…)
[å®¢æˆ·ç«¯æ•™ç¨‹é“¾æ¥][11]

- åˆ›å»ºè¿è¡Œè´¦å·
	useradd zabbix -s /sbin/nologin

- å®‰è£…ä¾èµ–
	apt-get install -y gcc curl


- ä¸‹è½½+è§£å‹+ç¼–è¯‘å®‰è£… agent

	cd /tmp

	wget http://jaist.dl.sourceforge.net/project/zabbix/ZABBIX%20Latest%20Stable/3.0.1 zabbix-3.0.1.tar.gz


- è§£å‹ tar -xf å‹ç¼©åŒ…
-x æ„æ€æ˜¯è§£å‹  / f å‚æ•°å¿…é¡». è®°ä½å°±è¡Œ.

- ç¼–è¯‘
	./configure --prefix=/usr/local/zabbix Â  --enable-agent
	//prefix é…ç½®å®‰è£…ä½ç½®
	//â€”enable-agent  åªå®‰è£… agent !!


- é…ç½®å®¢æˆ·ç«¯
	vi /usr/local/zabbix/etc/zabbix\_agentd.conf

	Server=0219.oicp.net            #è¢«åŠ¨æ¨¡å¼ï¼Œå…è®¸å“ªå°zabbixæœåŠ¡å™¨å¯ä»¥è¿æ¥.
	ServerActive=0219.oicp.net      #ä¸»åŠ¨æ¨¡å¼ï¼Œå…è®¸å‘å“ªå°zabbixæœåŠ¡å™¨ä¸ŠæŠ¥.
	Hostname=0214.help              #å®¢æˆ·ç«¯æœ¬æœºIPï¼Œå¦‚æœ‰DNSè§£æå¯å¡«ä¸»æœºå
	UnsafeUserParameters=1          #å…è®¸ç”¨æˆ·è‡ªå®šä¹‰å‚æ•°  278è¡Œ
	EnableRemoteCommands=1          #å…è®¸æ‰§è¡Œè¿œç¨‹å‘½ä»¤   69è¡Œ

- åˆ›å»ºinitæœåŠ¡  æœªæµ‹è¯•!!!!!  
	  
	cp misc/init.d/fedora/core/zabbix\_\* /etc/init.d
	sed -i 's/BASEDIR=\/usr\/local/BASEDIR=\/usr\/local\/zabbix/g' /etc/init.d/zabbix\_agentd

- è®¾ç½®å¼€æœºè‡ªå¯åŠ¨   æœªæµ‹è¯• !!!!!  

	chkconfig zabbix\_agentd on
	service zabbix\_agentd start



##### åäº”: å›å»é…ç½® Zabbix Web ç•Œé¢.

configuration â†’ Hosts â†’ Create host
Hostname : è¢«ç›‘æ§ ip
visiblename:  è¢«ç›‘æ§ ip
Group å³è¾¹éšä¾¿é€‰ä¸€ä¸ª? å¤§æ¦‚å°±æ˜¯ ä½ æœ‰å¾ˆå¤šæœåŠ¡å™¨è¦ç›‘æ§ .å¯ä»¥ç»™è¿™äº›æœåŠ¡å™¨ åˆ†ç»„.
Agent interfaces  ip DNS port å¦‚å®å¡«å†™.
â†’ ADD

ç„¶å Temple æ¨¡æ¿ é€‰æ‹©ä¸€ä¸ª?  è¢«ç›‘æ§çš„æ˜¯ä»€ä¹ˆç³»ç»Ÿçš„ å°±é€‰ä»€ä¹ˆå§....

[http://miclesvic.blog.51cto.com/2152735/1136222][12]    ?? æ•™ç¨‹ â€¦ 



è‡ªå¸¦å¾ˆå¤šæ¨¡æ¿  æ·»åŠ è¿™äº›æ¨¡æ¿ å°±èƒ½å®ç°å¾ˆå¤šåŠŸèƒ½äº†.



##### æœåŠ¡å™¨é‡å¯ä¹‹å:
è¦å¼€å¯ Apache  Server ç­‰ æ‰èƒ½ç™»å½•WEBç®¡ç†ç•Œé¢

sudo systemctl restart apache2.service


	http://0219.oicp.net/zabbix.php?action=dashboard.view
	ç™»å½•ç½‘å€



















































































































































---- --
## Zabbix - Mac OS

MySQL ç‰ˆæœ¬: 
	mysql --version

PHP ç‰ˆæœ¬:
	php --v

Apache ç‰ˆæœ¬:
	httpd --v



Zabbix-Server:

ä¸‹è½½ è§£å‹ ç¼–è¯‘ å®‰è£….

è¿™é‡Œä¸èƒ½ç”¨é»˜è®¤ç¼–è¯‘. å› ä¸ºè¿˜è¦å¼€å¯ä¸€äº›é¢å¤–çš„åŠŸèƒ½.

	./configure --enable-server --enable-agent --with-mysql --with-net-snmp --with-libcurl --with-libxml2 --prefix=$$HOME/Library/Zabbix


3. Set up the database
Create a new database user. Choose a database user password. I chose al9a0941h9.
$ /Library/PostgreSQL/8.3/bin/createuser zabbix --no-superuser
--createdb --no-createrole --pwprompt -U postgres
Enter password for new role: \<database user password\>
Enter it again: \<database user password\>
Password: \<superuser password\>
4. Create a new database
$ /Library/PostgreSQL/8.3/bin/createdb zabbix -U zabbix -W
Password: \<database user password\>
Populate the database with tables and data...
$ cat create/schema/postgresql.sql | /Library/PostgreSQL/8.3/bin/psql -U zabbix -W
Password for user zabbix: \<database user password\>
...
$ cat create/data/data.sql | /Library/PostgreSQL/8.3/bin/psql -U zabbix -W
Password for user zabbix: \<database user password\>
...
$ cat create/data/images\_pgsql.sql | /Library/PostgreSQL/8.3/bin/psql -U zabbix -W
Password for user zabbix: \<database user password\>
...




5. Configure the zabbix server
$ mkdir /Library/Zabbix/etc
$ cp misc/conf/zabbix\_server.conf /Library/Zabbix/etc/
Edit /Library/Zabbix/etc/zabbixserver.conf. Leave everything as default, but change the following two values...
DBUser=zabbix
DBPassword=al9a0941h9
Start the zabbix server...
./zabbix\_server --config=$$HOME/Library/Zabbix/etc/zabbix\_server.conf
6. Install & Configure MAMP
MAMP is the quickest way to get a full-blown Apache up and running with PHP5. Download it here and install the regular (non-pro) version.
Configure PHP by editing /Applications/MAMP/conf/php5/php.ini. Change...
max\_execution\_time = 300
Then go to the bottom of the file and add your timezone
date.timezone = America/Vancouver
Install the Zabbix front-end so MAMP can serve it
$ mv frontends/php /Library/Zabbix/frontend
$ ln -s /Library/Zabbix/frontend /Applications/MAMP/htdocs/zabbix




7. Launch MAMP & Configure Zabbix front-end
Double-click the main MAMP application and see that the servers start up.
Navigate to http://localhost:8888/zabbix/
Go through the configuration screens.
On the database screen, choose PostgreSQL, set the username to "zabbix" and the password to whatever database user password you chose.
On the zabbix server details screen, set the port to 8888.
You can now log on in with the username/password of Admin/zabbix
Notes on Security
This is a test installation on my home network, so I've foregone best practices for security and reliability. If you are relying on this zabbix installation for a production environment, you should consider taking some precautions...
â–ª PostgreSQL and Zabbix should both run as separate users
â–ª Zabbix should be started at boot via launchd
â–ª In order for launchd to monitor Zabbix, the zabbix\_server process should not background itself. I don't think this is currently possible without changing the server's source code.
â–ª Don't use MAMP for a production service. Configure Apache and PHP properly to start up at boot and run as a separate user.












---- 

## Zabbix å®¢æˆ·ç«¯ WinServer 2008

å®˜ç½‘ä¸‹è½½  Win å…¨ç³»åˆ— é€šç”¨åŒ….

è§£å‹. å‡ºæ¥  ä¸¤ä¸ªæ–‡ä»¶å¤¹: Bin + conf 

bin æ–‡ä»¶å¤¹ é€‰æ‹©ç›¸åº”çš„ç³»ç»Ÿç‰ˆæœ¬ . 
ç›¸åº”ç‰ˆæœ¬ä¸‹çš„ æ–‡ä»¶å¤¹. ,ç§»åŠ¨åˆ°C:Program Files  zabbix\_agentç›®å½•ä¸‹
è¿™ä¸ªç›®å½•å¾—è‡ªå·±æ‰‹åŠ¨å…ˆå»ºç«‹



4.é€‰æ‹©confæ–‡ä»¶å¤¹ä¸‹
zabbix\_agentd.win.confé…ç½®æ–‡ä»¶ï¼Œä¿®æ”¹ä¸ºã€Œzabbix\_agentd.confã€ã€‚

å¹¶ç§»åŠ¨åˆ°C:Program Fileszabbix\_agent win64ç›®å½•ä¸‹
 ç„¶åä¸‹è½½ notepad++  ç¼–è¾‘è¿™ä¸ªæ–‡ä»¶



LogFile=c:zabbix\_agentd.log
LogFile=C:Program Fileszabbix\_agentwin64zabbix\_agentd.logÂ Â # æ­¤å¤„ä¸ºagentçš„logæ–‡ä»¶å­˜æ”¾åœ°å€ã€‚
Server=127.0.0.1
Server=X.X.X.XÂ Â Â Â Â Â Â  # æ­¤å¤„ä¸ºzabbixæœåŠ¡å™¨IPã€‚
Hostname=Windows host
Hostname=Windows2008Â Â Â Â # æ­¤å¤„ä¿®æ”¹ä¸»æœºåã€‚




## æå“æ•™ç¨‹

[http://www.tecmint.com/install-and-configure-zabbix-monitoring-on-debian-centos-rhel/2/][13]





æœ€åä¸€æ­¥

ä¸èƒ½å†™å…¥æ–‡ä»¶ 
å¯ä»¥wgetä¸‹è½½  ç„¶åæ”¾åˆ°æŒ‡å®šä½ç½®.

ä¸‹è½½åè¦æ”¹å. 

æˆ–è€…ç›´æ¥æ–°å»ºæ–‡ä»¶ å†…å®¹ç²˜å¸–è¿›å»  ç„¶åç»™777 æƒé™   å†æœ¬åœ°æµè§ˆå™¨åˆ·æ–°  å°± ok äº†


æ—¶åŒºè®¾ç½®   ä¸ç„¶ web ç•Œé¢ä¼šçº¢è‰²æŠ¥é”™.
date.timezone = Asia/Chongqing 



ç•Œé¢æ˜¯èƒ½ æ¢æˆä¸­æ–‡çš„ 
å¯èƒ½è¦ è¢«ç›‘æ§é‚£é‡Œ ä¸‹è½½ä¸­æ–‡è¯­è¨€åŒ…


 æ”¶é›†ä¸åˆ°æ•°æ®.??  



## ä¾èµ–ç¯å¢ƒ

- Apache â€”â€”â€”â€”â€”â€” ç”¨ç½‘é¡µæ˜¾ç¤ºæœåŠ¡å™¨çŠ¶æ€.
- PHPâ€”â€”â€”â€”â€”â€”â€”â€” ç¼–ç¨‹è¯­è¨€. Apache ç”¨åˆ°.
- MySQLâ€”â€”â€”â€”â€”â€”â€”ä¿å­˜æ”¶é›†åˆ°çš„æ•°æ®.
- Zabbix Server  â€”â€”â€” ç›‘æ§+æ”¶é›†ä¿¡æ¯ .
- Zabbix Agent â€”â€”â€”â€” åªæœ‰æ”¶é›†ä¿¡æ¯.

> é€šå¸¸: è¿™å››ä¸ªè§’è‰² å¯ä»¥å®‰è£…åœ¨ä¸€å°ç”µè„‘.
> Apache / PHP / MySQL ç‰ˆæœ¬è¶Šæ–°è¶Šå¥½.


å…¶ä»–ç¯å¢ƒ:

OpenIPMIã€libssh2ã€fpingã€libcurlã€libiksemelã€net-snmp




## åŸºæœ¬ç¯å¢ƒé…ç½®

	yum install gcc gcc-c++ make openssl-devel curl wget net-snmp net-snmp-utils net-snmp-libs net-snmp-devel gnutls gnutls-devel libxml2 libxml2-devel























[1]:	http://www.zabbix.com/
[2]:	http://jaist.dl.sourceforge.net/project/zabbix/ZABBIX%20Latest%20Stable/3.0.1/zabbix-3.0.1.tar.gz
[3]:	https://curl.haxx.se/
[4]:	http://www.tecmint.com/install-and-configure-zabbix-monitoring-on-debian-centos-rhel/
[10]:	http://php.net/manual/en/timezones.php
[11]:	http://www.kar-chan.com/?p=2541
[12]:	http://miclesvic.blog.51cto.com/2152735/1136222
[13]:	http://www.tecmint.com/install-and-configure-zabbix-monitoring-on-debian-centos-rhel/2/