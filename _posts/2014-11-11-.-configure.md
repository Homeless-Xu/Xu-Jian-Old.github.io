---
layout: post
title: ./configure
tags: Misc
categories: ğŸ‘“-Linux
---

## ./configure

**æºç åŒ…å®‰è£…**
1. é…ç½® `./configure`
	2. ç¼–è¯‘ `make`
		3. å®‰è£… `make install`
		> è¿™ä¸€æ­¥æœ¬è´¨ä¸Šå°±æ˜¯æŠŠä¸Šä¸€æ­¥ç¼–è¯‘å‡ºæ¥çš„ç»“æœå¤åˆ¶åˆ°æˆ‘ä»¬æŒ‡å®šçš„ç›®å½•è€Œå·²

**Configureæ˜¯ä¸€ä¸ªå¯æ‰§è¡Œè„šæœ¬**
> åœ¨å¾…å®‰è£…çš„æºç è·¯å¾„ä¸‹ä½¿ç”¨å‘½ä»¤
`./configure â€“h` è¾“å‡ºè¯¦ç»†çš„é€‰é¡¹åˆ—è¡¨ã€‚

`--prefix`  **å®‰è£…çš„è·¯å¾„**
*é»˜è®¤å®‰è£…ä½ç½®*
**å¯æ‰§è¡Œæ–‡ä»¶**  `/usr/local/bin`
**åº“æ–‡ä»¶**      `/usr/local/lib`
**é…ç½®æ–‡ä»¶**    `/usr/local/etc`
**å…¶å®ƒæ–‡ä»¶**    `/usr/local/share`

*é…ç½®prefix*
`./configure --prefix=/usr/local/test`
> æŠŠæ‰€æœ‰æ–‡ä»¶æ”¾åœ¨/usr/local/testçš„è·¯å¾„ä¸­.
*prefix å¥½å¤„*
**å¸è½½è½¯ä»¶ï¼š**åˆ é™¤è¯¥å®‰è£…ç›®å½•ï¼Œå°±å¯å®Œå…¨å¸è½½å¹²å‡€ï¼›
**ç§»æ¤è½¯ä»¶ï¼š**æ‹·è´æ•´ä¸ªç›®å½•åˆ°å¦å¤–ä¸€ä¸ªæœºå™¨å³å¯ï¼›

*make*
ä¸€ä¸ªç¨‹åºæœ‰å¥½å¤šæ–‡ä»¶éœ€è¦ç¼–è¯‘.
è¿™äº›æ–‡ä»¶æ˜¯æœ‰ä¾èµ–å…³ç³»çš„
makefile ç®¡ç†è¿™äº›å…³ç³».
ä¸€ä¸ªä¸ªå»ç¼–è¯‘ å¤ªéº»çƒ¦ æ‰€ä»¥å°±æœ‰äº† make.


*makefile:Â *
æºä»£ç åŒ…è§£å‹å‡ºæ¥ä¸€å †æ–‡ä»¶
è¿™äº›æ–‡ä»¶æ˜¯æœ‰ä¾èµ–å…³ç³»çš„
ç”¨æ¥æŒ‡å¯¼ make å‘½ä»¤è¯¥æ€ä¹ˆå·¥ä½œ .
 
makefile æ˜¯è‡ªåŠ¨ç”Ÿæˆçš„.  è‡ªåŠ¨ç”Ÿæˆ makefile éœ€è¦ä¸¤ä¸ªæ–‡ä»¶.  åˆ†åˆ«æ˜¯ configure å’Œ makefile.in  
 configure æ–‡ä»¶æ˜¯ç”± autoconf å‘½ä»¤ ç”Ÿæˆçš„.
 makefile.in æ˜¯ç”± automake å‘½ä»¤ ç”Ÿæˆçš„.
 
 è½¯ä»¶åŒ…ä¸ºä»€ä¹ˆè¦å¸¦ configure æ–‡ä»¶å‘¢  ç›´æ¥ç»™ makefile ä¸å°±æˆäº†ä¹ˆ.
 å› ä¸º configure è¦ æ ¹æ®ä½ ç³»ç»Ÿå¹³å° æ¥ç”Ÿæˆ makefile æ–‡ä»¶.
 

gcc:    GNU CC  ä¹Ÿå°±æ˜¯Cç¼–è¯‘å™¨ï¼Œ
g++:    æ‰æ˜¯cppç¼–è¯‘å™¨




åœ¨ç”µè„‘ä¸­è‡ªåŠ¨å®‰è£…ã€é…åˆ¶ã€å¸è½½å’Œå‡çº§è½¯ä»¶åŒ…çš„å·¥å…·ç»„åˆ.

åœ¨Linuxå‘è¡Œç‰ˆä¸­ï¼Œå‡ ä¹æ¯ä¸€ä¸ªå‘è¡Œç‰ˆéƒ½æœ‰è‡ªå·±çš„è½¯ä»¶åŒ…ç®¡ç†ç³»ç»Ÿã€‚  
å¸¸è§æœ‰:  
ç®¡ç†debè½¯ä»¶åŒ…çš„dpkgä»¥åŠå®ƒçš„å‰ç«¯aptï¼ˆä½¿ç”¨äºDebianã€Ubuntuï¼‰ã€‚  
rpmä»¥åŠå®ƒçš„å‰ç«¯yumï¼ˆä½¿ç”¨äºFedoraï¼‰ã€å‰ç«¯ZYppï¼ˆä½¿ç”¨äºopenSUSEï¼‰ã€ å‰ç«¯urpmiï¼ˆä½¿ç”¨äºMandriva Linuxã€Mageiaï¼‰ç­‰ã€‚  
ä½¿ç”¨è½¯ä»¶åŒ…ç®¡ç†ç³»ç»Ÿå°†å¤§å¤§ç®€åŒ–åœ¨Linuxå‘è¡Œç‰ˆä¸­å®‰è£…è½¯ä»¶çš„è¿‡ç¨‹ã€‚




RPMï¼Œå…¨ç§°ä¸ºRPM Package Managerï¼Œæ˜¯ç”±Red Hatæ¨å‡ºçš„è½¯ä»¶åŒ…ç®¡ç†ç³»ç»Ÿï¼Œç°åœ¨åœ¨å„ç§å‘è¡Œç‰ˆä¸­æ™®éä½¿ç”¨ã€‚

dpkgæ˜¯Debian Packageçš„ç®€å†™ï¼Œç”±Debianå‘è¡Œç‰ˆå¼€å‘ï¼Œç”¨äºå®‰è£…ã€å¸è½½å’Œä¾›ç»™å’Œdebè½¯ä»¶åŒ…ç›¸å…³çš„ä¿¡æ¯ã€‚



è½¯ä»¶åŒ…ç®¡ç†ç³»ç»Ÿ:
åˆ†æˆä¸¤ç»„
 ä¸€ç»„ä½¿ç”¨RPM(Red Hat Package Manager),  
 è€Œå¦ä¸€ç»„ä½¿ç”¨dpkgåŒ…ç®¡ç†å™¨.  
  æˆ‘ä»¬é€‰æ‹©ä¸¤ç§åŸºäºRPMçš„å‘è¡Œç‰ˆ, CentOSå’ŒSUSE, åœ¨ä¼ä¸šä¸­æµè¡Œ. å–ä»£ä½¿ç”¨Debianä½œä¸ºä¸€ä¸ªåŸºäºdpkgçš„å‘è¡Œç‰ˆ,  
 æˆ‘ä»¬é€‰æ‹©Ubuntuå› ä¸ºä»–åœ¨åˆå­¦è€…ä¸­å¹¿æ³›æµè¡Œ. ç”±äºUbuntuæ´¾ç”ŸäºDebian, è®¨è®ºUbuntuçš„ç« èŠ‚ä¹Ÿé€‚ç”¨äºDebianä¸éœ€è¦å¤§çš„ä¿®æ”¹.


é¢„ç¼–è¯‘è½¯ä»¶:ç¼ºç‚¹ ä¸ä¼šå®‰è£…æœ€æ–°çš„ç‰ˆæœ¬åˆ°ä½ ç”µè„‘. ä¹Ÿå°±æ˜¯æ›´æ–°æ…¢.

ä»æºç å®‰è£…è½¯ä»¶æ˜¯configure, make, make installçš„åŒä¹‰è¯. æˆ‘ä»¬å°†ä½¿ç”¨å‘å‹å§çš„åŒ…ç®¡ç†å™¨æ¥ä»æºç ç¼–è¯‘æ–°çš„è½¯ä»¶.


ä»æºç ç¼–è¯‘
æœ‰æ—¶æœ‰éœ€è¦æ¥å®‰è£…æœ€æ–°ç‰ˆæœ¬çš„è½¯ä»¶æˆ–è€…åŒ…å«ä¸€äº›é¢„ç¼–è¯‘è½¯ä»¶æ²¡æœ‰æ”¯æŒçš„æ¨¡å—. è¿™éœ€è¦ä»æºç ç¼–è¯‘è½¯ä»¶. å¤§å¤šæ•°å¼€æºè½¯ä»¶åŒ…æ˜¯ä½œä¸ºä¸€ä¸ªTARå‹ç¼©åŒ…å‘å¸ƒçš„. TARå®é™…ä¸Šå¯ä»¥æŒ‡ç”¨äºåˆ›å»ºTARæ–‡ä»¶çš„ç¨‹åº(åç§°æ˜¯tape archiveçš„ç®€å†™)æˆ–è€…åˆæˆæ–‡ä»¶çš„æ–‡ä»¶æ ¼å¼. ä¸€ä¸ªTARæ–‡ä»¶ä¹Ÿé€šå¸¸æ˜¯å‹ç¼©çš„æ¥å‡å°‘ä½“ç§¯. æ–‡ä»¶åå°†ä¼šè¡¨ç¤ºå‹ç¼©çš„æ ¼å¼. ä¸€ä¸ªæ–‡ä»¶åä»¥.tgzæˆ–è€….tar.gzç»“å°¾ä½¿ç”¨gzip. ä¸€ä¸ªæ–‡ä»¶åä»¥.tbz, .tb2, æˆ–è€….tar.bz2ç»“å°¾ä½¿ç”¨bzip2å‹ç¼©. ä¸ºäº†ç¼–è¯‘è½¯ä»¶æˆ‘ä»¬è§£å‹è¿™ä¸ªæ–‡ä»¶, ç„¶åæ‰§è¡Œå‘½ä»¤configure, makeå’Œmake installåœ¨è§£å‹çš„æ–‡ä»¶å¤¹å†….
ç„¶è€Œæœ‰æ›´å¥½çš„æ–¹å¼åˆ©ç”¨å‘è¡Œç‰ˆçš„åŒ…ç®¡ç†ç³»ç»Ÿæ¥ç¼–è¯‘è½¯ä»¶. ä¸æ˜¯æ‰€æœ‰çš„TARæ–‡ä»¶å¸®åŠ©è¿™ä¸ªå®¹æ˜“å®ç°, ä½†æ˜¯FreeRADIUSæ˜¯è¿™æ ·ä¸€ä¸ªæˆç†Ÿçš„é¡¹ç›®, å…è®¸åœ¨ä»»æ„è¿™3ä¸ªå‘è¡Œç‰ˆä¸Šä»æºç ç¼–è¯‘è½¯ä»¶.



ç¼–è¯‘åŒ…çš„ä¼˜åŠ¿
ä¸‹é¢æ˜¯ä¸€äº›ä»æºç ç¼–è¯‘åŒ…çš„ä¼˜åŠ¿
â€¢ å®¹æ˜“å®‰è£…, å‡çº§, å¸è½½æˆ–å‘å¸ƒè½¯ä»¶.
â€¢ å®¹æ˜“æ£€æŸ¥é‚£ä¸ªç‰ˆæœ¬çš„è½¯ä»¶æ˜¯å®‰è£…çš„.
â€¢ èƒ½å¤Ÿçœ‹åˆ°å“ªäº›æ–‡ä»¶è¢«å®‰è£…, å“ªäº›å‘è¡Œç‰ˆç›¸å…³çš„ä¿®æ”¹.
æ—¢ç„¶ä½ å·²ç»ç¡®å®šç”¨è¿™ç§æ–¹å¼ç¼–è¯‘åŒ…, æˆ‘ä»¬å°†ä¼šä¸ºæ¯ä¸ªå‘è¡Œç‰ˆæ¥åšä»–.


ä»æºç ç¼–è¯‘FreeRADIUSéœ€è¦è®¸å¤šå¼€å‘åº“. æ ‡å‡†çš„SLESä»“åº“ä¸éœ€è¦å…¨éƒ¨åŒ…å«ä»–ä»¬ä»–ä»¬, ç”šè‡³å½“ä½¿ç”¨çš„SDK DVDæ˜¯SLESçš„ä¸€éƒ¨åˆ†. æˆ‘ä»¬å› æ­¤éœ€è¦æ·»åŠ OpenSUSEä»“åº“. è¿™å°†ä¼šæ»¡è¶³æ‰€æœ‰çš„å¼€å‘åº“éœ€æ±‚.

1   é€šè¿‡ä¸‹é¢çš„URLå®šä½ç¦»ä½ æœ€è¿‘çš„OpenSUSEé•œåƒ: http://mirrors.opensuse.org
2   ä½¿ç”¨rootç”¨æˆ·å¼€å§‹YAST.
3   é€‰æ‹©Software | Software Repositorieså¹¶ä¸”ç„¶åé€‰æ‹©Addæ¥æ·»åŠ åˆ°ä¸€ä¸ªä»“åº“.
4   æ·»åŠ åœ¨å¼€å§‹æ—¶ä½ é€‰æ‹©çš„OpenSUSEé•œåƒ. å¯¹äºæˆ‘çš„OpenSUSE11.3æœ€è¿‘çš„URLæ˜¯: ftp://opensuse.mirror.ac.za/opensuse/distribution/11.3/repo/oss/suse
5   ä½ å¯èƒ½è¦è¢«æ¥å—GnuPGå¯†é’¥çš„å¯¼å…¥å¯¹äºæ–°çš„ä»“åº“. é€‰æ‹©Importæ¥ç»§ç»­.
è¿™ä¸ªè®¾ç½®ç¼–è¯‘FreeRADIUS RPMçš„é˜¶æ®µ. ç°åœ¨éµå¾ªä¸‹é¢çš„æ­¥éª¤:
1   ä»å®˜ç½‘ä¸‹è½½æœ€æ–°çš„.tar.bz2æ ¼å¼çš„FreeRADIUSæºç .
2   SLESåŒ…æ‹¬ä¸€ä¸ªç›®å½•ç»“æ„ä¸“é—¨ç”¨äºç¼–è¯‘RPM. ä½äº/usr/src/packages. æ‹·è´åŸå§‹çš„bz2æºæ–‡ä»¶åˆ°SOURCESç›®å½•. æ›¿æ¢xå’Œyä¸ºå¯¹åº”çš„ç‰ˆæœ¬. cp freeradius-server-2.x.y.tar.bz2 /usr/src/packages/SOURCES/.
3   ä»TARæ–‡ä»¶è§£å‹SUSE RPM .specæ–‡ä»¶, æ›¿æ¢x,yä¸ºå¯¹åº”ç‰ˆæœ¬.# cd /usr/src/packages/SOURCES/
4   # tar -xvjf freeradius-server-2.x.y.tar.bz2 freeradius-server-2.x.y/suse/freeradius.spec
5  
6   æ‹·è´ä¸‹é¢çš„æ–‡ä»¶åˆ°/usr/src/packages/SPECSç›®å½•:# cp freeradius-server-2.x.y/suse/freeradius.spec ../SPECS/
7  
8   ç¼–è¾‘specæ–‡ä»¶çš„ä¸‹é¢çš„è¡Œ, ä¿®æ”¹%{fillup\_and\_insserv -s freeradius START\_RADIUSD}ä¸º%{fillup\_and\_insserv freeradius}.
9   è¿è¡Œä¸‹é¢çš„å‘½ä»¤æ¥å†³å®šä¾èµ–. rpmbuild -ba /usr/src/packages/SPECS/freeradius.spec
10  è¿™ä¸ªå°†ä¼šåˆ—å‡ºå¿…è¦çš„å¼€å‘åŒ…æ¥å®‰è£…, ä¸ºäº†FreeRADIUS RPMè¢«ç¼–è¯‘. åœ¨ä½ çš„ç³»ç»Ÿä¸Šçš„åˆ—è¡¨å¯èƒ½ä¸åŒ. ä¸‹é¢æ˜¯æˆ‘çš„ç³»ç»Ÿä¸Šçš„ç»“æœ(ç”¨zypperå®‰è£…ä»–ä»¬)zypper in db-devel e2fsprogs-devel gcc-c++ gdbm-devel gettext-devel glibc-devel ncurses-devel openldap2-devel openssl-devel pam-devel postgresql-devel python-devel unixODBC-devel zlib-devel apache2-devel cyrus-sasl-devel krb5-devel libapr1-devel libmysqlclient-devel
11  
12  å†æ¬¡è¿è¡Œrpmbuildå‘½ä»¤. å¦‚æœæ‰€æœ‰çš„ä¾èµ–éƒ½æ»¡è¶³, RPMçš„ç¼–è¯‘å°†ä¼šå¼€å§‹. æŠŠç»“æœteeåˆ°ä¸€ä¸ªæ–‡ä»¶ç”¨äºå°†æ¥çš„è°ƒæŸ¥.rpmbuild -ba /usr/src/packages/SPECS/freeradius.spec | tee /tmp/build\_out.txt
13  
14  å½“ç¼–è¯‘å®Œæˆ, RPMä½äº/usr/src/packages/RPMS/\<architecture\>/ç›®å½•.
15  ä½¿ç”¨ä¸‹é¢å‘½ä»¤å®‰è£…æ–°çš„FreeRADIUSåŒ….# cd /usr/src/packages/RPMS/\<architecture\>/
16  # zypper in freeradius-server-2.x.y-0.i586.rpm freeradius-server-libs-2.x.y-0.i586.rpm freeradius-server-utils-2.x.y-0.i586.rpm
17  
18  æ³¨æ„é»˜è®¤FreeRADIUSå°†ä¼šå·²ç”¨æˆ·radiusdè¿è¡Œ. è¿™ä¸ªç”¨æˆ·æ˜¯åœ¨å®‰è£…FreeRADIUSè¿‡ç¨‹ä¸­åˆ›å»ºçš„. ç»™è¿™ä¸ªç”¨æˆ·certsç›®å½•çš„æƒé™. å¦åˆ™ä¼šå®‰è£…å¤±è´¥.chown -R radiusd. /etc/raddb/certs
19  
20  é€šè¿‡radiusd -Xæ¥ç¡®è®¤radiusedå¯ä»¥æ­£ç¡®å¯åŠ¨.
21  Ctrl+Cå°†ä¼šåœæ­¢æ­£åœ¨è¿è¡Œçš„FreeRADIUS. ä½ ç°åœ¨å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å¯åŠ¨è„šæœ¬æ¥å¯åŠ¨FreeRADIUS/etc/init.d/freeradius start







åŠŸèƒ½ : å…å»æ‰‹åŠ¨ç¼–è¯‘å®‰è£…  

|ç³»ç»Ÿ|è½¯ä»¶ç®¡ç†å™¨|
|:---:|:---:|
|Mac| brew(æ‰‹åŠ¨å®‰è£…)  |
|CentOS | yum (è‡ªå¸¦) | 
|ubuntu | apt-get | 
|Debian ||


# Mac brew

## ä½¿ç”¨æ–¹æ³•   ï¼ˆä»¥wgetä¸ºä¾‹ï¼‰
|å‘½ä»¤|ä½œç”¨|
|:---:|:---:|
æŸ¥æ‰¾è½¯ä»¶åŒ…              åˆ—å‡ºå·²å®‰è£…çš„è½¯ä»¶åŒ…         å®‰è£…è½¯ä»¶åŒ…                   åˆ é™¤è½¯ä»¶åŒ…
brewÂ searchÂ wget         brewÂ list          brewÂ installÂ wget      brewÂ removeÂ wget


æŸ¥çœ‹è½¯ä»¶åŒ…ä¿¡æ¯           åˆ—å‡ºè½¯ä»¶åŒ…çš„ä¾èµ–å…³ç³»
brewÂ infoÂ wget            brewÂ depsÂ wget

 æ›´æ–°brew       åˆ—å‡ºè¿‡æ—¶çš„è½¯ä»¶åŒ…                æ›´æ–°è¿‡æ—¶çš„è½¯ä»¶åŒ…ï¼ˆå…¨éƒ¨æˆ–æŒ‡å®šï¼‰
brewÂ update      brewÂ outdated           brewÂ upgrade  æˆ–  brewÂ upgradeÂ wget






Centos  yum

æº [http://itgeeker.net/centos-7-epel-china-mirror-repository/][1]
æŸ¥æ‰¾è½¯ä»¶ yum search
æ›´æ–°è½¯ä»¶ yum update
åˆ—å‡ºè½¯ä»¶ä¿¡æ¯ yum list installed ppp





# Debian:

é»˜è®¤è‡ªå¸¦ apt-get  ç”¨ sudo è¿è¡Œ  

|            å‘½ä»¤            |                    ä½œç”¨                    |
| :----------------------: | :--------------------------------------: |
|           å®‰è£…è½¯ä»¶           |         apt-get install softname         |
|           å¸è½½è½¯ä»¶           |         apt-get remove softname          |
|           é‡è£…è½¯ä»¶           |        apt-get â€”reinstall install        |
|           æœç´¢è½¯ä»¶           |             apt-cache search             |
|          æ›´æ–°å·²è£…è½¯ä»¶          |              apt-get update              |
|          ä¿®å¤å®‰è£…è½¯ä»¶          |       apt-get -f install softname        |
|          åˆ æ— ç”¨è½¯ä»¶           |              apt-get clean               |
|          äº†è§£ä½¿ç”¨ä¾èµ–          |            apt-cache depends             |
|         ä¸‹è½½è½¯ä»¶æºä»£ç           |              apt-get source              |
|         åˆ—å‡ºè½¯ä»¶åŒ…çš„å†…å®¹         |        apt-file list packagename         |
|           å®Œæ•´å¸è½½           |      apt-get --purge remove åˆ é™¤é…ç½®æ–‡ä»¶.      |
|           å½»åº•å¸è½½           | apt-get autoremove --purge åˆ é™¤ä¾èµ–è½¯ä»¶åŒ…+é…ç½®æ–‡ä»¶. |
|                          |                                          |
|                          |                                          |
|     apt-get check #      |                æ£€æŸ¥æ˜¯å¦æœ‰æŸåçš„ä¾èµ–                |
|     dpkg -S filename     |            æŸ¥æ‰¾filenameå±äºå“ªä¸ªè½¯ä»¶åŒ…             |
| apt-file search filename |            æŸ¥æ‰¾filenameå±äºå“ªä¸ªè½¯ä»¶åŒ…             |
|     apt-file update      |              æ›´æ–°apt-fileçš„æ•°æ®åº“              |

## Tè½¯ä»¶å®‰è£…æ–¹æ³•:

ç”¨è½¯ä»¶åŒ…ç®¡ç†å™¨: ç›´æ¥å®‰è£…. çš„

|||

| :---: | :---: |
| ----- | ----- |
|       |       |



huo'z 

|      |      |      |
| ---- | ---- | ---- |
|      |      |      |
|      |      |      |
|      |      |      |




[1]:	http://itgeeker.net/centos-7-epel-china-mirror-repository/